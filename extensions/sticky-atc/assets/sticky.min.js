"use strict";(()=>{(function(){let r=window.__SHOP_SETTINGS__||{corner:"BOTTOM_RIGHT",paddingX:16,paddingY:16};function a(){let t=document.querySelector('form[action^="/cart/add"] input[name="id"]');return t?t.value:null}function l(){let t=document.querySelector('form[action^="/cart/add"] [type="submit"], form[action^="/cart/add"] button');if(!t)return!1;let e=t.getBoundingClientRect();return e.width>0&&e.height>0&&e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function u(){if(document.getElementById("lafayette-sticky-atc"))return;let t=document.createElement("button");t.id="lafayette-sticky-atc",t.innerText="Add to Cart",t.style.position="fixed",t.style.zIndex="9999",t.style.background="#111",t.style.color="#fff",t.style.border="none",t.style.borderRadius="8px",t.style.padding="12px 32px",t.style.fontSize="18px",t.style.cursor="pointer",t.style.boxShadow="0 2px 8px rgba(0,0,0,0.08)",t.style.transition="all 0.3s",c(t,r.corner,r.paddingX,r.paddingY),t.addEventListener("click",async function(){let e=a();if(!e){alert("No product found.");return}t.disabled=!0,t.innerText="Adding...";try{(await fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`id=${encodeURIComponent(e)}&quantity=1`})).ok?(t.innerText="Added!",setTimeout(()=>t.innerText="Add to Cart",1500)):t.innerText="Error"}catch{t.innerText="Error"}t.disabled=!1}),document.body.appendChild(t)}function c(t,e,n,o){switch(t.style.top=t.style.right=t.style.bottom=t.style.left="auto",e){case"TOP_LEFT":t.style.top=o+"px",t.style.left=n+"px";break;case"TOP_RIGHT":t.style.top=o+"px",t.style.right=n+"px";break;case"BOTTOM_LEFT":t.style.bottom=o+"px",t.style.left=n+"px";break;case"BOTTOM_RIGHT":default:t.style.bottom=o+"px",t.style.right=n+"px";break}}function d(){let t=document.getElementById("lafayette-sticky-atc");t&&(t.style.display=l()?"none":"block")}function y(){setInterval(d,500)}function s(){u(),d();let t=document.querySelector('form[action^="/cart/add"] [type="submit"], form[action^="/cart/add"] button');window.IntersectionObserver&&t?new IntersectionObserver(n=>{if(!n.length)return;let o=n[0],i=document.getElementById("lafayette-sticky-atc");i&&(i.style.display=o.isIntersecting?"none":"block")},{threshold:.01}).observe(t):y()}window.addEventListener("message",t=>{if(!t.data||typeof t.data!="object")return;let{corner:e,paddingX:n,paddingY:o}=t.data,i=document.getElementById("lafayette-sticky-atc");i&&c(i,e,n,o)}),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",s):s()})();})();
